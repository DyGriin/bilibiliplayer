const DEADSTATE = 0xffffffff;
const INVALIDCHAR = 0xffffffff;

class BasLexer {
    private transTable: Array<any>;
    private finalTable: any;
    private inputTable: Array<any>;
    private initialTable: any;

    private start!: number;
    private oldStart!: number;
    private tokenNameString!: string | null;
    private yyText: any;
    private yyObject!: Object;
    private ended!: boolean;
    private initialInput!: number;
    private initialStateString!: string;

    private line!: number;
    private col!: number;
    private advanced!: boolean;

    private sourceString!: string;

    constructor() {
        this.transTable = [
            [
                false,
                [4294967295, 2, 1],
                [
                    [0, 42, 0],
                    [43, 43, 1],
                    [44, 44, 2],
                ],
            ],
            [
                false,
                [
                    4294967295,
                    27,
                    26,
                    25,
                    24,
                    23,
                    22,
                    21,
                    20,
                    19,
                    18,
                    17,
                    16,
                    15,
                    14,
                    13,
                    12,
                    11,
                    10,
                    9,
                    8,
                    7,
                    6,
                    5,
                    4,
                    3,
                ],
                [
                    [0, 2, 0],
                    [3, 3, 1],
                    [4, 4, 2],
                    [5, 5, 3],
                    [6, 6, 4],
                    [7, 7, 5],
                    [8, 8, 6],
                    [9, 9, 7],
                    [10, 10, 8],
                    [11, 11, 9],
                    [12, 12, 10],
                    [13, 13, 11],
                    [14, 14, 12],
                    [15, 15, 13],
                    [16, 16, 14],
                    [17, 17, 15],
                    [18, 18, 16],
                    [19, 19, 17],
                    [20, 20, 18],
                    [21, 21, 19],
                    [22, 22, 20],
                    [23, 37, 21],
                    [38, 38, 22],
                    [39, 39, 23],
                    [40, 41, 24],
                    [42, 42, 25],
                    [43, 44, 0],
                ],
            ],
            [
                false,
                [30, 28, 29, 4294967295],
                [
                    [0, 0, 0],
                    [1, 20, 1],
                    [21, 21, 2],
                    [22, 39, 1],
                    [40, 40, 3],
                    [41, 42, 1],
                    [43, 44, 3],
                ],
            ],
            [
                false,
                [4294967295, 31],
                [
                    [0, 41, 0],
                    [42, 42, 1],
                    [43, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 4],
                [
                    [0, 39, 0],
                    [40, 41, 1],
                    [42, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 14, 37, 36, 35, 34, 33, 32],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 31, 0],
                    [32, 32, 3],
                    [33, 34, 4],
                    [35, 35, 5],
                    [36, 37, 6],
                    [38, 38, 7],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 38],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [true],
            [true],
            [true],
            [true],
            [
                false,
                [4294967295, 7, 39],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 35, 1],
                    [36, 36, 2],
                    [37, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 40],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 35, 1],
                    [36, 36, 2],
                    [37, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 14, 37, 36, 34, 33, 32],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 31, 0],
                    [32, 32, 3],
                    [33, 34, 0],
                    [35, 35, 4],
                    [36, 37, 5],
                    [38, 38, 6],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 41],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 31, 1],
                    [32, 32, 2],
                    [33, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 42],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 35, 1],
                    [36, 36, 2],
                    [37, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [true],
            [true],
            [true],
            [true],
            [true],
            [
                false,
                [4294967295, 7, 43],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 30, 1],
                    [31, 31, 2],
                    [32, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 44],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 16, 1],
                    [17, 17, 2],
                    [18, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [true],
            [true],
            [true],
            [true],
            [true],
            [true],
            [
                false,
                [45, 4294967295, 47, 46],
                [
                    [0, 0, 0],
                    [1, 1, 1],
                    [2, 2, 0],
                    [3, 14, 1],
                    [15, 15, 0],
                    [16, 20, 1],
                    [21, 21, 0],
                    [22, 27, 1],
                    [28, 28, 2],
                    [29, 30, 0],
                    [31, 33, 1],
                    [34, 34, 3],
                    [35, 44, 1],
                ],
            ],
            [
                false,
                [31, 48, 4294967295],
                [
                    [0, 39, 0],
                    [40, 40, 1],
                    [41, 42, 0],
                    [43, 44, 2],
                ],
            ],
            [
                false,
                [4294967295, 38],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 49, 50],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 19, 0],
                    [20, 20, 2],
                    [21, 21, 0],
                    [22, 22, 2],
                    [23, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 51, 53, 52],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 37, 0],
                    [38, 38, 3],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 54],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 0],
                    [16, 16, 1],
                    [17, 25, 0],
                    [26, 27, 1],
                    [28, 35, 0],
                    [36, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 55, 56],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 37, 0],
                    [38, 38, 2],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 57, 58],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 37, 0],
                    [38, 38, 2],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 38, 37, 36, 34, 33],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 31, 0],
                    [32, 32, 3],
                    [33, 34, 0],
                    [35, 35, 4],
                    [36, 37, 5],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 59],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 2],
                    [16, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 60],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 2],
                    [16, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 61],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 35, 1],
                    [36, 36, 2],
                    [37, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 62],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 26, 1],
                    [27, 27, 2],
                    [28, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 63],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 30, 1],
                    [31, 31, 2],
                    [32, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 64],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 24, 1],
                    [25, 25, 2],
                    [26, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [true],
            [
                false,
                [4294967295, 65],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 0],
                    [16, 16, 1],
                    [17, 25, 0],
                    [26, 27, 1],
                    [28, 35, 0],
                    [36, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 66],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 0],
                    [16, 16, 1],
                    [17, 25, 0],
                    [26, 27, 1],
                    [28, 35, 0],
                    [36, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 48],
                [
                    [0, 39, 0],
                    [40, 40, 1],
                    [41, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 49, 37, 36, 34],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 31, 0],
                    [32, 32, 3],
                    [33, 34, 0],
                    [35, 35, 4],
                    [36, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 49],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 51, 37, 68, 67, 52],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 34, 0],
                    [35, 35, 3],
                    [36, 37, 4],
                    [38, 38, 5],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 69],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [true],
            [
                false,
                [4294967295, 54],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 0],
                    [16, 16, 1],
                    [17, 25, 0],
                    [26, 27, 1],
                    [28, 35, 0],
                    [36, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 55, 37, 34, 70, 56],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 34, 0],
                    [35, 35, 3],
                    [36, 37, 4],
                    [38, 38, 5],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 71],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 57, 68, 72, 58],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 34, 0],
                    [35, 35, 2],
                    [36, 37, 3],
                    [38, 38, 4],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 73],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 74],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 29, 1],
                    [30, 30, 2],
                    [31, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 75],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 16, 1],
                    [17, 17, 2],
                    [18, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 76],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 29, 1],
                    [30, 30, 2],
                    [31, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 77],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 0],
                    [16, 16, 1],
                    [17, 25, 0],
                    [26, 27, 1],
                    [28, 35, 0],
                    [36, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 78],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 0],
                    [16, 16, 1],
                    [17, 25, 0],
                    [26, 27, 1],
                    [28, 35, 0],
                    [36, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 79, 80],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 19, 0],
                    [20, 20, 2],
                    [21, 21, 0],
                    [22, 22, 2],
                    [23, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 53],
                [
                    [0, 17, 0],
                    [18, 18, 1],
                    [19, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 69, 37, 68, 67],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 34, 0],
                    [35, 35, 3],
                    [36, 37, 4],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 81, 82],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 19, 0],
                    [20, 20, 2],
                    [21, 21, 0],
                    [22, 22, 2],
                    [23, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 71, 37, 34, 70],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 34, 0],
                    [35, 35, 3],
                    [36, 37, 4],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 83, 84],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 19, 0],
                    [20, 20, 2],
                    [21, 21, 0],
                    [22, 22, 2],
                    [23, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 73, 68, 72],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 34, 0],
                    [35, 35, 2],
                    [36, 37, 3],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 85],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 23, 1],
                    [24, 24, 2],
                    [25, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7, 86],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 35, 1],
                    [36, 36, 2],
                    [37, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [true],
            [
                false,
                [4294967295, 87],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 0],
                    [16, 16, 1],
                    [17, 25, 0],
                    [26, 27, 1],
                    [28, 35, 0],
                    [36, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 79, 37, 68],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 34, 0],
                    [35, 35, 3],
                    [36, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 79],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 81, 37, 34],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 17, 0],
                    [18, 18, 2],
                    [19, 34, 0],
                    [35, 35, 3],
                    [36, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 81],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 83, 68],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 34, 0],
                    [35, 35, 2],
                    [36, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 83],
                [
                    [0, 15, 0],
                    [16, 16, 1],
                    [17, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 7],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 18, 1],
                    [19, 22, 0],
                    [23, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [
                false,
                [4294967295, 88],
                [
                    [0, 6, 0],
                    [7, 8, 1],
                    [9, 13, 0],
                    [14, 14, 1],
                    [15, 15, 0],
                    [16, 16, 1],
                    [17, 25, 0],
                    [26, 27, 1],
                    [28, 35, 0],
                    [36, 37, 1],
                    [38, 38, 0],
                    [39, 39, 1],
                    [40, 44, 0],
                ],
            ],
            [true],
        ];
        this.finalTable = {
            4: 1,
            5: 3,
            6: 26,
            7: 30,
            8: 5,
            9: 7,
            10: 6,
            11: 27,
            12: 30,
            13: 30,
            14: 3,
            15: 30,
            16: 30,
            17: 19,
            18: 22,
            19: 23,
            20: 29,
            21: 20,
            22: 30,
            23: 30,
            24: 24,
            25: 28,
            26: 21,
            27: 25,
            28: 12,
            29: 11,
            31: 0,
            34: 2,
            36: 2,
            37: 2,
            38: 3,
            39: 30,
            40: 30,
            41: 30,
            42: 30,
            43: 30,
            44: 30,
            45: 8,
            48: 0,
            49: 3,
            53: 2,
            54: 4,
            59: 13,
            60: 14,
            61: 30,
            62: 15,
            63: 30,
            64: 30,
            74: 18,
            75: 30,
            76: 30,
            77: 10,
            85: 16,
            86: 17,
            88: 9,
        };
        this.inputTable = [
            [0, 8, 1],
            [9, 9, 41],
            [10, 10, 40],
            [11, 11, 1],
            [12, 12, 41],
            [13, 13, 40],
            [14, 31, 1],
            [32, 32, 41],
            [33, 33, 1],
            [34, 34, 21],
            [35, 35, 1],
            [36, 36, 23],
            [37, 37, 10],
            [38, 38, 1],
            [39, 39, 2],
            [40, 40, 9],
            [41, 41, 4],
            [42, 42, 1],
            [43, 43, 22],
            [44, 44, 19],
            [45, 45, 20],
            [46, 46, 38],
            [47, 47, 42],
            [48, 48, 39],
            [49, 57, 16],
            [58, 58, 1],
            [59, 59, 5],
            [60, 60, 1],
            [61, 61, 13],
            [62, 63, 1],
            [64, 64, 23],
            [65, 68, 26],
            [69, 69, 37],
            [70, 70, 26],
            [71, 87, 23],
            [88, 88, 33],
            [89, 90, 23],
            [91, 91, 12],
            [92, 92, 0],
            [93, 93, 11],
            [94, 94, 1],
            [95, 95, 23],
            [96, 96, 1],
            [97, 97, 8],
            [98, 98, 26],
            [99, 99, 7],
            [100, 100, 14],
            [101, 101, 36],
            [102, 102, 27],
            [103, 103, 23],
            [104, 104, 32],
            [105, 107, 23],
            [108, 108, 17],
            [109, 109, 35],
            [110, 110, 30],
            [111, 111, 25],
            [112, 112, 31],
            [113, 113, 23],
            [114, 114, 29],
            [115, 115, 18],
            [116, 116, 15],
            [117, 117, 28],
            [118, 119, 23],
            [120, 120, 34],
            [121, 121, 24],
            [122, 122, 23],
            [123, 123, 6],
            [124, 124, 1],
            [125, 125, 3],
            [126, 65535, 1],
        ];
        this.initialTable = { STRING: 1, INITIAL: 2 };
    }

    static lexSeq(source: any) {
        const lexer = new BasLexer();
        lexer['source'] = source;
        const tokens = [];
        let token = lexer['token'];
        while (token !== '<$>') {
            tokens.push({ token: token, text: lexer['yytext'], start: lexer['startIdx'], end: lexer['endIdx'] });
            lexer.advance();
            token = lexer['token'];
        }
        return tokens;
    }

    yyrestart(src: any = null) {
        if (src != null) {
            this.sourceString = src;
        }
        this.ended = false;
        this.start = 0;
        this.oldStart = 0;
        this.line = 1;
        this.col = 0;
        this.advanced = true;
        this.tokenNameString = null;
        this.yyObject = {};
        this['initialState'] = 'INITIAL';
    }

    set source(src: any) {
        this.sourceString = src;
        this.yyrestart();
    }

    get token() {
        if (this.advanced) {
            this.tokenNameString = this.next();
            this.advanced = false;
        }
        return this.tokenNameString;
    }

    advance() {
        this.advanced = true;
    }

    get startIdx() {
        return this.oldStart;
    }

    get endIdx() {
        return this.start;
    }

    get position() {
        return [this.line, this.col];
    }

    get positionInfo() {
        return this.token + '@row:' + this['position'].join('col:');
    }

    get yytext() {
        return this.yyText;
    }

    get yyleng() {
        return this['endIdx'] - this['startIdx'];
    }

    set yytext(value) {
        this.yyText = value;
    }

    get yy() {
        return this.yyObject;
    }

    get tokenName() {
        return this.tokenNameString;
    }

    next() {
        let findex: any;
        let nextState;
        let char;
        let begin;
        let next;
        let ochar;
        let curState;
        let lastFinalState;
        let lastFinalPosition;

        while (true) {
            findex = null;
            nextState = null;
            char = 0;
            begin = this.start;
            next = this.start;
            ochar = INVALIDCHAR;
            lastFinalState = DEADSTATE;
            lastFinalPosition = this.start;
            curState = this.transTable[0][1][this.initialInput];
            while (true) {
                char = this.sourceString.charCodeAt(next);
                /** 计算行,列位置 **/
                if (ochar !== INVALIDCHAR) {
                    if (char === 0x0d) {
                        this.col = 0;
                        this.line++;
                    } else if (char === 0x0a) {
                        if (ochar !== 0x0d) {
                            this.col = 0;
                            this.line++;
                        }
                    } else {
                        this.col++;
                    }
                }
                ochar = char;
                /** 计算行,列位置--结束 **/
                nextState = this.trans(curState, char);
                if (nextState === DEADSTATE) {
                    if (begin === lastFinalPosition) {
                        if (this.start === this.sourceString.length) {
                            if (!this.ended) {
                                this.ended = true;
                                return '<$>';
                            } else {
                                throw new Error('已经到达末尾.');
                            }
                        }
                        throw new Error(
                            '意外的字符,line:' +
                            this['position'].join(',col:') +
                            'of ' +
                            this.sourceString.substr(begin, 20),
                        );
                    } else {
                        findex = this.finalTable[lastFinalState];
                        this.start = lastFinalPosition;
                        this.oldStart = begin;
                        this.yyText = this.sourceString.substring(this['startIdx'], this['endIdx']);
                        switch (findex) {
                            case 0x2:
                                return 'time';
                            case 0x3:
                                return 'number';
                            case 0x4:
                                return 'hex';
                            case 0x5:
                                return '+';
                            case 0x6:
                                return '-';
                            case 0x7:
                                this.begin('STRING');
                                return 'str_start';
                            case 0x8:
                                return 'str_esc_char';
                            case 0x9:
                                return 'str_esc_unicode';
                            case 0xa:
                                return 'str_esc_ascii';
                            case 0xb:
                                this.begin('INITIAL');
                                return 'str_end';
                            case 0xc:
                                return 'str_seg';
                            case 0xd:
                                return 'set';
                            case 0xe:
                                return 'let';
                            case 0xf:
                                return 'def';
                            case 0x10:
                                return 'apply';
                            case 0x11:
                                return 'clone';
                            case 0x12:
                                return 'then';
                            case 0x13:
                                return '=';
                            case 0x14:
                                return '(';
                            case 0x15:
                                return ')';
                            case 0x16:
                                return '[';
                            case 0x17:
                                return ']';
                            case 0x18:
                                return '{';
                            case 0x19:
                                return '}';
                            case 0x1a:
                                return '.';
                            case 0x1b:
                                return ',';
                            case 0x1c:
                                return ';';
                            case 0x1d:
                                return '%';
                            case 0x1e:
                                return 'id';
                        }
                        break;
                    }
                } else {
                    findex = this.finalTable[nextState];
                    if (findex != null) {
                        lastFinalState = nextState;
                        lastFinalPosition = next + 1;
                    }
                    next += 1;
                    curState = nextState;
                }
            }
        }
        // return "";//这里的值会影响返回值!!
    }

    trans(curState: any, character: any) {
        if (isNaN(character)) {
            return DEADSTATE;
        }
        if (character < this.inputTable[0][0] || character > this.inputTable[this.inputTable.length - 1][1]) {
            throw new Error('输入超出有效范围,line:' + this['position'].join(',col:'));
        }
        if (this.transTable[curState][0] === true) {
            return DEADSTATE;
        }

        const ipt = this.find(character, this.inputTable);
        const ipt2 = this.find(ipt, this.transTable[curState][2]);
        return this.transTable[curState][1][ipt2];
    }

    find(code: any, seg: any) {
        let min;
        let max;
        let mid;
        min = 0;
        max = seg.length - 1;
        while (true) {
            mid = (min + max) >>> 1;
            if (seg[mid][0] <= code && seg[mid][1] >= code) {
                return seg[mid][2];
            } else if (seg[mid][0] > code) {
                max = mid - 1;
            } else {
                min = mid + 1;
            }
        }
        // return 0;
    }

    begin(state: any = null) {
        if (state == null) {
            this['initialState'] = 'INITIAL';
            return;
        }
        this['initialState'] = state;
    }

    get initialState() {
        return this.initialStateString;
    }

    set initialState(value) {
        if (this.initialTable[value] === undefined) {
            throw new Error('未定义的起始状态:' + value);
        }
        this.initialStateString = value;
        this.initialInput = this.initialTable[value];
    }
}

export default BasLexer;
